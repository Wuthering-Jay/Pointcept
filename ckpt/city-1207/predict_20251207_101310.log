2025-12-07 10:13:10 - 日志文件: ckpt\city-1207\predict_20251207_101310.log
2025-12-07 10:13:10 - ============================================================
2025-12-07 10:13:10 - LAS 点云预测流程开始（逐文件处理模式）
2025-12-07 10:13:10 - ============================================================
2025-12-07 10:13:10 - 输入路径: D:\data\云南遥感中心数据第二批\disk02
2025-12-07 10:13:10 - 输出目录: D:\data\云南遥感中心数据第二批\disk02_pred
2025-12-07 10:13:10 - 临时文件目录: D:\data\云南遥感中心数据第二批\disk02_pred
2025-12-07 10:13:10 - 配置文件: ckpt\city-1207\semseg-pt-v2m5-0-base.py
2025-12-07 10:13:10 - 权重文件: ckpt\city-1207\model_best.pth
2025-12-07 10:13:10 - 递归处理子文件夹: False
2025-12-07 10:13:10 - AMP 混合精度: True
2025-12-07 10:13:10 - 定期缓存清理间隔(test步数): 20
2025-12-07 10:13:10 - require_labels: None
2025-12-07 10:13:10 - ignore_labels: []
2025-12-07 10:13:10 - window_size: (200.0, 200.0)
2025-12-07 10:13:10 - min_points: 5000
2025-12-07 10:13:10 - use_lac: True
2025-12-07 10:13:10 - 
2025-12-07 10:13:10 - 找到 17 个 LAS 文件待处理
2025-12-07 10:13:10 - 
2025-12-07 10:13:10 - ============================================================
2025-12-07 10:13:10 - [1/17] 处理文件: processed_城镇68.las
2025-12-07 10:13:10 -   输入: D:\data\云南遥感中心数据第二批\disk02\processed_城镇68.las
2025-12-07 10:13:10 -   输出: D:\data\云南遥感中心数据第二批\disk02_pred\processed_城镇68.las
2025-12-07 10:13:10 - ============================================================
2025-12-07 10:13:10 -   [Step 1] 提取需要预测的点...
2025-12-07 10:13:14 -   [Step 2] Tile 分块处理...
2025-12-07 10:13:20 -   [Step 3] 深度学习预测...
2025-12-07 10:13:22 -   ✗ 处理失败: SemSegTester: Error(s) in loading state_dict for DefaultSegmentor:
	size mismatch for backbone.patch_embed.proj.0.weight: copying a param with shape torch.Size([12, 6]) from checkpoint, the shape in current model is torch.Size([12, 4]).
	size mismatch for backbone.patch_embed.pointnet.shared_mlp.0.weight: copying a param with shape torch.Size([6, 6]) from checkpoint, the shape in current model is torch.Size([6, 4]).
2025-12-07 10:13:22 - Traceback (most recent call last):
  File "d:\code\Pointcept\pointcept\utils\registry.py", line 60, in build_from_cfg
    return obj_cls(**args)
  File "d:\code\Pointcept\pointcept\engines\test.py", line 62, in __init__
    self.model = self.build_model()
  File "d:\code\Pointcept\pointcept\engines\test.py", line 92, in build_model
    model.load_state_dict(weight, strict=False)
  File "C:\Users\admin\AppData\Local\conda\conda\envs\pointcept\lib\site-packages\torch\nn\modules\module.py", line 2624, in load_state_dict
    raise RuntimeError(
RuntimeError: Error(s) in loading state_dict for DefaultSegmentor:
	size mismatch for backbone.patch_embed.proj.0.weight: copying a param with shape torch.Size([12, 6]) from checkpoint, the shape in current model is torch.Size([12, 4]).
	size mismatch for backbone.patch_embed.pointnet.shared_mlp.0.weight: copying a param with shape torch.Size([6, 6]) from checkpoint, the shape in current model is torch.Size([6, 4]).

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\code\Pointcept\predict.py", line 743, in predict_las
    process_single_las(
  File "d:\code\Pointcept\predict.py", line 511, in process_single_las
    launch(
  File "d:\code\Pointcept\pointcept\engines\launch.py", line 89, in launch
    main_func(*cfg)
  File "d:\code\Pointcept\predict.py", line 301, in run_prediction
    tester = TESTERS.build(dict(type=cfg.test.type, cfg=cfg))
  File "d:\code\Pointcept\pointcept\utils\registry.py", line 228, in build
    return self.build_func(*args, **kwargs, registry=self)
  File "d:\code\Pointcept\pointcept\utils\registry.py", line 63, in build_from_cfg
    raise type(e)(f"{obj_cls.__name__}: {e}")
RuntimeError: SemSegTester: Error(s) in loading state_dict for DefaultSegmentor:
	size mismatch for backbone.patch_embed.proj.0.weight: copying a param with shape torch.Size([12, 6]) from checkpoint, the shape in current model is torch.Size([12, 4]).
	size mismatch for backbone.patch_embed.pointnet.shared_mlp.0.weight: copying a param with shape torch.Size([6, 6]) from checkpoint, the shape in current model is torch.Size([6, 4]).

2025-12-07 10:13:22 - 
2025-12-07 10:13:22 - ============================================================
2025-12-07 10:13:22 - [2/17] 处理文件: processed_城镇69.las
2025-12-07 10:13:22 -   输入: D:\data\云南遥感中心数据第二批\disk02\processed_城镇69.las
2025-12-07 10:13:22 -   输出: D:\data\云南遥感中心数据第二批\disk02_pred\processed_城镇69.las
2025-12-07 10:13:22 - ============================================================
2025-12-07 10:13:22 -   [Step 1] 提取需要预测的点...
2025-12-07 10:13:26 -   [Step 2] Tile 分块处理...
2025-12-07 10:13:33 -   [Step 3] 深度学习预测...
